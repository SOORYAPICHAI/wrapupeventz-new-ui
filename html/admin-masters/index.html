<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

</head>

<body>


</body>

<script>
    function uuidv4() {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
            var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
            return v.toString(16);
        });
    }

    const uploadEvents = async (events) => {
        return await new Promise(async (resolve, reject) => {
            let calls = events.map(async (val) => {
                const data = {
                    event_name: val.event_name,
                    event_id: uuidv4(),
                    service_id:val.service_id,
                    created_at: new Date(),
                    updated_at: new Date(),
                    isActive: true
                };
                return await fetch('http://localhost:8000/api/create-event', {
                    method: 'POST', // or 'PUT'
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data),
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log('Success:', data);
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                    });
            })
            await Promise.all(calls).then(data => {
                resolve(true);
            })
                .catch(err => {
                    console.log(err);
                    reject(false)
                })
        })
    }

    let events_to_create = [
        {event_name:'Wedding',service_id:"2794301f-23fc-4991-aff5-78d2e22156ce"},
        // {event_name:'Wedding',service_id:"261d0e5d-3d43-4aa5-8e88-e04db8eba675"},
        // {event_name:'Wedding',service_id:"38814bd2-28d2-4c96-958e-ee50affcde2e"},
        // {event_name:'Wedding',service_id:"e206bfba-82d1-4198-9dc1-442b9a6e9427"},
        // {event_name:'Wedding',service_id:"0bead504-f2be-44c7-9d23-42b5a33b64fd"},
        // {event_name:'Wedding',service_id:"a5bc807f-abd7-408c-9d30-80b5e77616f0"}
]
// events_to_create.map(events=>{return {event_name:events.event_name,service_id:events.service_id}})
//     uploadEvents(events_to_create).then(val => {
//         alert("saved")
//     }).catch((error) => {
//         alert(JSON.stringify(error))
//      })


    // UPLOAD SERVICES

    const uploadServices = async (events) => {
        return await new Promise(async (resolve, reject) => {
            let calls = events.map(async (val) => {
                const data = {
                    service_name: val,
                    service_id: uuidv4(),
                    created_at: new Date(),
                    updated_at: new Date(),
                    isActive: true,
                };
                return await fetch('http://localhost:8000/api/create-service', {
                    method: 'POST', // or 'PUT'
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data),
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log('Success:', data);
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                    });
            })
            await Promise.all(calls).then(data => {
                resolve(true);
            })
                .catch(err => {
                    console.log(err);
                    reject(false)
                })
        })
    }

    const newServices = ["Photography","Decorators", "Catering", "Venues", "Make Up", "Music & Dance"]

    // uploadServices(newServices).then(val => {
    //     alert("saved")
    // }).catch((error) => {
    //     alert(JSON.stringify(error))
    //  })

    // UPLOAD SUB SERVICES

    const uploadSubServices = async (events) => {
        return await new Promise(async (resolve, reject) => {
            let calls = events.map(async (val) => {
                const data = {
                    sub_service_id: uuidv4(),
      sub_service_name: val.sub_service_name,
      service_id: val.service_id,
      created_at: new Date(),
      updated_at: new Date(),
      isActive: true,
                };
                return await fetch('http://localhost:8000/api/create-sub-service', {
                    method: 'POST', // or 'PUT'
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data),
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log('Success:', data);
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                    });
            })
            await Promise.all(calls).then(data => {
                resolve(true);
            })
                .catch(err => {
                    console.log(err);
                    reject(false)
                })
        })
    }

    let sub_services_create = [
        {sub_service_name:'Candid',service_id:"606fe7df-2820-4d9e-96bc-9d016e0d7d64"},
        {sub_service_name:'Traditional',service_id:"606fe7df-2820-4d9e-96bc-9d016e0d7d64"},
        {sub_service_name:'Both',service_id:"606fe7df-2820-4d9e-96bc-9d016e0d7d64"},
        // {event_name:'Wedding',service_id:"261d0e5d-3d43-4aa5-8e88-e04db8eba675"},
        // {event_name:'Wedding',service_id:"38814bd2-28d2-4c96-958e-ee50affcde2e"},
        // {event_name:'Wedding',service_id:"e206bfba-82d1-4198-9dc1-442b9a6e9427"},
        // {event_name:'Wedding',service_id:"0bead504-f2be-44c7-9d23-42b5a33b64fd"},
        // {event_name:'Wedding',service_id:"a5bc807f-abd7-408c-9d30-80b5e77616f0"}
]
// sub_services_create.map(events=>{return {event_name:events.event_name,service_id:events.service_id}})
//     uploadSubServices(sub_services_create).then(val => {
//         alert("saved")
//     }).catch((error) => {
//         alert(JSON.stringify(error))
//      })

</script>

</html>